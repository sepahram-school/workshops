## ===============================
## Spark Defaults for Iceberg + LakeKeeper
## ===============================

# -------------------------------
# Spark executor & driver configs
# -------------------------------
spark.executor.memory              1g
spark.executor.cores               2
spark.driver.memory                2g

# -------------------------------
# Enable Iceberg Spark extensions
# -------------------------------
spark.sql.extensions               org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions

# -------------------------------
# Built-in Spark catalog
# (leave default as is, but override below with your own catalogs)
# -------------------------------

# -------------------------------
# LakeKeeper catalog (production, REST)
# -------------------------------
spark.sql.catalog.lakekeeper       org.apache.iceberg.spark.SparkCatalog
spark.sql.catalog.lakekeeper.type  rest
spark.sql.catalog.lakekeeper.uri   http://lakekeeper:8181/catalog
spark.sql.catalog.lakekeeper.warehouse "irisa-ot"
spark.sql.catalog.lakekeeper.io-impl org.apache.iceberg.aws.s3.S3FileIO
spark.sql.defaultCatalog lakekeeper

# -------------------------------
# Optional JDBC catalog (if you use PostgreSQL directly)
# -------------------------------
spark.sql.catalog.postgres         org.apache.iceberg.spark.SparkCatalog
spark.sql.catalog.postgres.type    jdbc
spark.sql.catalog.postgres.uri     jdbc:postgresql://postgres:5432/iceberg_catalog
spark.sql.catalog.postgres.warehouse file:///opt/bitnami/spark/warehouse/
spark.sql.catalog.postgres.jdbc.user iceberg
spark.sql.catalog.postgres.jdbc.password iceberg

# -------------------------------
# Default catalog
# (set to local for dev, or lakekeeper for production)
# -------------------------------
spark.sql.defaultCatalog           lakekeeper

# -------------------------------
# Ivy cache override (to avoid re-downloading jars)
# -------------------------------
spark.jars.ivy /opt/bitnami/spark/jars
